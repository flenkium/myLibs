cmake_minimum_required(VERSION 3.2.0)
project(myLibs CXX)

set(BDD_LIB myBDD)
set(EXAMPLE examples)

#####
# Scripted building of Print and then main
#####

include(ExternalProject)

if(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
    set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/install" CACHE PATH "default install path" FORCE)
endif()

ExternalProject_Add(
  ${BDD_LIB}
  SOURCE_DIR ${CMAKE_SOURCE_DIR}/lib/${BDD_LIB}
  INSTALL_DIR ${CMAKE_INSTALL_PREFIX}/${BDD_LIB}
  CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
    -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
    -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}
)

ExternalProject_Add(
  ${EXAMPLE}
  SOURCE_DIR ${CMAKE_SOURCE_DIR}/${EXAMPLE}
  INSTALL_DIR ${CMAKE_INSTALL_PREFIX}/${EXAMPLE}
  CMAKE_ARGS
    -DCMAKE_PREFIX_PATH=${CMAKE_INSTALL_PREFIX}/${BDD_LIB}
    -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
    -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
    -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}
  DEPENDS ${BDD_LIB}
)
